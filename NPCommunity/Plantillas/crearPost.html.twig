<html>
	<head>
		<meta charset="UTF-8">
		<script type="text/javascript" src="{{ asset('js/crearPost.js') }}"></script>
		<script type="text/javascript" src="{{ asset('js/busqueda.js') }}"></script>
		{# Css #}
		<link
		rel="stylesheet" href="{{ asset('css/estilo.css') }}">
		{# Alertas #}
		<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
		{# bootstrap #}
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
		<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
		<title>Crear post</title>
	</head>
	<body>
		{% include 'barraSuperior.html.twig' %}
		<div class="container-fluid px-5">
			{% if gruposSeguidos | length == 0 %}
				{# si no sigue a ningun grupo #}
				<div class="row d-flex justify-content-center align-items-center mt-5">
					<div class=" col-8 col-md-6 col-lg-4 alert alert-danger d-flex justify-content-center align-items-center mt-5">
						Antes de publicar un post tienes que seguir algún grupo
					</div>
				</div>
			{% else %}
				<div class="row d-flex justify-content-center align-items-center">
					<div class="col-11 d-flex justify-content-center align-items-center my-3">
						<h1 id="crearGrupoH1">Publica un nuevo Post</h1>
					</div>
				</div>

				<div class="row d-flex justify-content-center align-items-center">
					<div class="col-11 col-md-9 col-lg-6">
						<div class="row mb-2">
							<div class="col-5">
								En qué grupo quieres publicar tu post?
							</div>
							<div class="col-5 mb-3">

								<select id="grupos_seguidos" class="form-select" aria-label="Default select example" onchange="ponerFotoGrupo(this.value)">
									<option value="">Elige un grupo...</option>
									{% for grupo in gruposSeguidos %}
										<option value="{{ grupo.id }}">{{ grupo.nombre }}</option>
									{% endfor %}
								</select>

							</div>
							<div class="col-2 d-flex justify-content-center align-items-center">
								<img id="fotoGrupo" width="55px" height="55px" alt="" style="display: none;">
							</div>
						</div>

						<div class="row mb-2">
							<div class="col-lg-9">
								<div class="row mb-3">
									<div class="col-4">
										Sube una imagen
									</div>
									<div class="col-8">
										<input type="file" id="foto" onchange="validarFoto()" class="form-control">
									</div>
								</div>

								<div class="row mb-2">
									<div class="col-4">
										Sube un archivo
										<span class="badge text-bg-secondary">No es obligatorio</span>
									</div>
									<div class="col-8">
										<input type="file" id="archivo" class="form-control">
									</div>
								</div>
							</div>
							<div class="col-lg-3 d-flex justify-content-center align-items-center">
								<img id="imagen" style="width: 130px; display: none;">
							</div>
						</div>


						<div class="row mb-2">
							<div class="col-12" id="limiteCaracteres" style="text-align: center;">
								Escribe el contenido de tu post
							</div>
							<div class="col-12">
								<textarea id="contenidoPost" class="form-control" placeholder="Escribe aquí tu post" rows="6"></textarea>
							</div>
						</div>

						<div class="row mb-2">
							<div class="col-12  d-flex justify-content-center align-items-center">
								<button type="button" class="btn btn-primary btn-lg btn-block" onclick="validarPost()">Publicar</button>
							</div>
						</div>
					</div>
				</div>
			{% endif %}
		</div>

	</body>
</html>
